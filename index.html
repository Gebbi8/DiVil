<!DOCTYPE html>
<html>

<head>
	<title>DiVile</title>
	<meta charset="UTF-8">
	<!-- <link rel="stylesheet" href="javascriptAndCss/style.css"> -->
	<!-- <script type="text/javascript" src="thirdParty/d3.min.js"></script> -->
	<script src="https://d3js.org/d3.v5.js"></script>
	<script type="text/javascript" src="thirdParty/jquery-2.1.4.min.js"></script>
	<script type="text/javascript" src="javascriptAndCss/sboTermMapping.js"></script>
	<script type="text/javascript" src="javascriptAndCss/showSbgn.js"></script>
	<script type="text/javascript" src="javascriptAndCss/customSymbol.js"></script>
	<script type="text/javascript" src="bives/bivesTool.js"></script>
	<script type="text/javascript" src="javascriptAndCss/download.js"></script>
	<script type="text/javascript" src="javascriptAndCss/downloadSBML.js"></script>
	<script type="text/javascript" src="thirdParty/FileSaver.js"></script>
	<script type="text/javascript" src="javascriptAndCss/appendDefs.js"></script>
	<script type="text/javascript" src="javascriptAndCss/sbmlParser.js"></script>
	<script type="text/javascript" src="javascriptAndCss/xmlDiffParser.js"></script>
	<script type="text/javascript" src="javascriptAndCss/arrowsOnNodes.js"></script>

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
		integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>

<body>
	<div class="containter">
		<div class="row">
			<div class="col-2" id="left">
				<h4>DiVil</h4>
				<div id="modelSelection">
					<h1> Select two model versions </h1>
					<select id="versionChoice" class="box" size="10">
						<optgroup label="Liebal from BioModels">
							<option class="opt" value="test">Kummer2000/2011-09-01/BIOMD0000000329</option>
							<option class="opt" value="test">Kummer2000/2012-02-08/BIOMD0000000329</option>
							<option class="opt" value="test">Kummer2000/2012-05-20/BIOMD0000000329</option>
							<option class="opt" value="test">Kummer2000/2012-08-11/BIOMD0000000329</option>
							<option class="opt" value="test">Kummer2000/2012-12-12/BIOMD0000000329</option>
							<option class="opt" value="test">Kummer2000/2015-04-06/BIOMD0000000329</option>
							<option class="opt" value="test">Kummer2000/2017-06-26/BIOMD0000000329</option>
						</optgroup>
						<optgroup label="Liebal from BioModels">
							<option class="opt" value="test">Liebal1-BIOMD0000000461.xml</option>
							<option class="opt" value="test">Liebal2-BIOMD0000000461.xml</option>
							<option class="opt" value="test">Liebal3-BIOMD0000000461.xml</option>
						</optgroup>
						<optgroup label="Test Fake Models">
							<option class="opt" value="test">allGlyphsAndArcs</option>
							<option class="opt" value="test">GlyphsAndArcs</option>
							<option class="opt" value="test">GlyphsAndArcs_noTypo</option>
						</optgroup>
						<optgroup label="PK Cycle">
							<option class="opt" value="test">model_MOR_AC</option>
							<option class="opt" value="test">model_PKA_cycle</option>
						</optgroup>
						<optgroup label="PK Cycle">
							<option class="opt" value="test">PKA_cycle_l2v5</option>
							<option class="opt" value="test">PKA_cycle_MOR_l2v4</option>
						</optgroup>
						<optgroup label="Schroebel2002 vs Chen2009">
							<option class="opt" value="test">BIOMD0000000019</option>
							<option class="opt" value="test">BIOMD0000000255</option>
						</optgroup>
						<optgroup label="Tyson1991 - Cell Cycle 2 var (BioModel 6)">
							<option class="opt" value="test">original</option>
						</optgroup>
						<optgroup label="modified Tyson1991 - Cell Cycle 2 var (BioModel 6)">
							<option class="opt" value="test">symbols</option>
							<option class="opt" value="test">updates</option>
							<option class="opt" value="test">deletion</option>
							<option class="opt" value="test">multiple</option>
						</optgroup>
						<optgroup label="BioModel7/Novak1997_CellCycle">
							<option class="opt" value="test">R3</option>
							<option class="opt" value="test">R37</option>
						</optgroup>
						<optgroup label="BSA-laczsynth">
							<option class="opt" value="test">2012-11-10</option>
							<option class="opt" value="test">2012-11-11</option>
						</optgroup>
						<optgroup label="Diff different models - Test">
							<option class="opt" value="test">BIOM348</option>
							<option class="opt" value="test">BIOM349</option>
						</optgroup>
					</select>
					<button id="selectVersion">select</button>
					<button id="removeVersion">remove</button>
				</div>

				<div id="selectionDiv">
					<h1>Selection</h1>
					<select id="selection" class="box" size="2"></select>
				</div>
				<div>
					<button id="compareModels">compare</button>
				</div>
			</div>

			<div class="col-8" id="bivesGraph">
				<form>
					Toggle process node ports
					<input type="checkbox" id="portToggle">
				</form>
				<div id="buttons">
					<button id="sbgnMLdownload">Download SBGN-ML</button>
				</div>
				<div id="buttons">
					<button id="sbmlDownload">Download SBML</button>
				</div>
			</div>
			<div class="col-2" id="forceControls">
				<div class="force alpha">
					<p><label>alpha</label> Simulation activity</p>
					<div class="alpha_bar" onclick="updateAll();">
						<div id="alpha_value"></div>
					</div>
				</div>
				<div class="force">
					<p><label>center</label> Shifts the view, so the graph is centered at this location.</p>
					<label>
						x
						<output id="center_XSliderOutput">.5</output>
						<input type="range" min="0" max="1" value=".5" step="0.01"
							oninput="d3.select('#center_XSliderOutput').text(value); forceProperties.center.x=value; updateAll();">
					</label>
					<label>
						y
						<output id="center_YSliderOutput">.5</output>
						<input type="range" min="0" max="1" value=".5" step="0.01"
							oninput="d3.select('#center_YSliderOutput').text(value); forceProperties.center.y=value; updateAll();">
					</label>
				</div>

				<div class="force">
					<p><label><input type="checkbox" checked
								onchange="forceProperties.charge.enabled = this.checked; updateAll();"> charge</label>
						Attracts
						(+) or repels (-) nodes to/from each other.</p>
					<label title="Negative strength repels nodes. Positive strength attracts nodes.">
						strength
						<output id="charge_StrengthSliderOutput">-30</output>
						<input type="range" min="-200" max="50" value="-30" step=".1"
							oninput="d3.select('#charge_StrengthSliderOutput').text(value); forceProperties.charge.strength=value; updateAll();">
					</label>
					<label title="Minimum distance where force is applied">
						distanceMin
						<output id="charge_distanceMinSliderOutput">1</output>
						<input type="range" min="0" max="50" value="1" step=".1"
							oninput="d3.select('#charge_distanceMinSliderOutput').text(value); forceProperties.charge.distanceMin=value; updateAll();">
					</label>
					<label title="Maximum distance where force is applied">
						distanceMax
						<output id="charge_distanceMaxSliderOutput">2000</output>
						<input type="range" min="0" max="2000" value="2000" step=".1"
							oninput="d3.select('#charge_distanceMaxSliderOutput').text(value); forceProperties.charge.distanceMax=value; updateAll();">
					</label>
				</div>

				<div class="force">
					<p><label><input type="checkbox" checked
								onchange="forceProperties.collide.enabled = this.checked; updateAll();"> collide</label>
						Prevents nodes from overlapping</p>
					<label>
						strength
						<output id="collide_StrengthSliderOutput">.7</output>
						<input type="range" min="0" max="2" value=".7" step=".1"
							oninput="d3.select('#collide_StrengthSliderOutput').text(value); forceProperties.collide.strength=value; updateAll();">
					</label>
					<label title="Size of nodes">
						radius
						<output id="collide_radiusSliderOutput">70</output>
						<input type="range" min="0" max="100" value="70" step="1"
							oninput="d3.select('#collide_radiusSliderOutput').text(value); forceProperties.collide.radius=value; updateAll();">
					</label>
					<label
						title="Higher values increase rigidity of the nodes (WARNING: high values are computationally expensive)">
						iterations
						<output id="collide_iterationsSliderOutput">1</output>
						<input type="range" min="1" max="10" value="1" step="1"
							oninput="d3.select('#collide_iterationsSliderOutput').text(value); forceProperties.collide.iterations=value; updateAll();">
					</label>
				</div>

				<div class="force">
					<p><label><input type="checkbox"
								onchange="forceProperties.forceX.enabled = this.checked; updateAll();">
							forceX</label> Acts like gravity. Pulls all points towards an X location.</p>
					<label>
						strength
						<output id="forceX_StrengthSliderOutput">.1</output>
						<input type="range" min="0" max="1" value=".1" step="0.01"
							oninput="d3.select('#forceX_StrengthSliderOutput').text(value); forceProperties.forceX.strength=value; updateAll();">
					</label>
					<label
						title="The X location that the force will push the nodes to (NOTE: This demo multiplies by the svg width)">
						x
						<output id="forceX_XSliderOutput">.5</output>
						<input type="range" min="0" max="1" value=".5" step="0.01"
							oninput="d3.select('#forceX_XSliderOutput').text(value); forceProperties.forceX.x=value; updateAll();">
					</label>
				</div>

				<div class="force">
					<p><label><input type="checkbox"
								onchange="forceProperties.forceY.enabled = this.checked; updateAll();">
							forceY</label> Acts like gravity. Pulls all points towards a Y location.</p>
					<label>
						strength
						<output id="forceY_StrengthSliderOutput">.1</output>
						<input type="range" min="0" max="1" value=".1" step="0.01"
							oninput="d3.select('#forceY_StrengthSliderOutput').text(value); forceProperties.forceY.strength=value; updateAll();">
					</label>
					<label
						title="The Y location that the force will push the nodes to (NOTE: This demo multiplies by the svg height)">
						y
						<output id="forceY_YSliderOutput">.5</output>
						<input type="range" min="0" max="1" value=".5" step="0.01"
							oninput="d3.select('#forceY_YSliderOutput').text(value); forceProperties.forceY.y=value; updateAll();">
					</label>
				</div>

				<div class="force">
					<p><label><input type="checkbox" checked
								onchange="forceProperties.link.enabled = this.checked; updateAll();"> link</label> Sets
						link
						length</p>
					<label title="The force will push/pull nodes to make links this long">
						distance
						<output id="link_DistanceSliderOutput">30</output>
						<input type="range" min="0" max="100" value="30" step="1"
							oninput="d3.select('#link_DistanceSliderOutput').text(value); forceProperties.link.distance=value; updateAll();">
					</label>
					<label
						title="Higher values increase rigidity of the links (WARNING: high values are computationally expensive)">
						iterations
						<output id="link_IterationsSliderOutput">1</output>
						<input type="range" min="1" max="10" value="1" step="1"
							oninput="d3.select('#link_IterationsSliderOutput').text(value); forceProperties.link.iterations=value; updateAll();">
					</label>
				</div>
			</div>
		</div>
	</div>
	<script>
		var obj;

		document.getElementById("selectVersion").onclick = function () {
			var x = document.getElementById("selection");
			var y = document.getElementById("versionChoice");

			var option = document.createElement("option");
			option.text = y[y.selectedIndex].text;
			x.add(option);
		};
		document.getElementById("removeVersion").onclick = function () {
			var x = document.getElementById("selection");
			x.remove(x.selectedIndex);
		}

		document.getElementById("compareModels").onclick = function () {

			obj = getBivesData("http://hopper.informatik.uni-rostock.de/GitRepos/DiVil/testModels/" + document
				.getElementById("selection")[0].text + ".xml",
				"http://hopper.informatik.uni-rostock.de/GitRepos/DiVil/testModels/" + document.getElementById(
					"selection")[1].text + ".xml",
				["reportHtml", "reactionsSbgnJson", "xmlDiff", "separateAnnotations"]);
		}
		//document.getElementById("sbgnMLdownload").onclick = function() {console.log(obj); download(obj)};
		//document.getElementById("sbmlDownload").onclick = function() {console.log(obj); downloadSBML(obj)};
		//showSbgn(obj);
		// console.log("http://localhost/SBI-Rep/divil/testModels/000006/" + document.getElementById("selection")[0].text + "",
		//  			"http://localhost/SBI-Rep/divil/testModels/000006/" + document.getElementById("selection")[1].text + "",
		//				["reportHtml", "reactionsSbgnJson", "xmlDiff", "separateAnnotations"]);};
		//document.getElementById("compareModels").onclick = function() {obj = getBivesData("http://localhost/SBI-Rep/masterthesis_tom/implementation/testModels/BioModel7/Novak1997_CellCycle-R3", "http://localhost/SBI-Rep/masterthesis_tom/implementation/testModels/BioModel7/Novak1997_CellCycle-R37", "reactionsSbgnJson");};

		var x = document.getElementById("selection");
		var option = document.createElement("option");
		option.text = "GlyphsAndArcs_noTypo";
		x.add(option);
		option = document.createElement("option");
		option.text = "GlyphsAndArcs_noTypo";
		x.add(option);

		getBivesData(
			"http://hopper.informatik.uni-rostock.de/GitRepos/DiVil/testModels/" + "Kummer2000/2011-09-01/BIOMD0000000329" + ".xml",
			"http://hopper.informatik.uni-rostock.de/GitRepos/DiVil/testModels/" + "Kummer2000/2011-09-01/BIOMD0000000329" + ".xml",
			["reportHtml", "reactionsSbgnJson", "xmlDiff", "separateAnnotations"]);
	</script>
</body>

</html>